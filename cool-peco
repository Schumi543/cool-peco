local readonly basedir=$(dirname $0)

FPATH=$FPATH:$basedir/utils
FPATH=$FPATH:$basedir/functions
FPATH=$FPATH:$basedir/customs
autoload -Uz _cool-peco-insert-command-line

local fp
for fp in $(ls $basedir/{functions,customs}/*); do
  local f=$(basename $fp)
  autoload -Uz $f
  zle -N $f
done

# for backward compability.
function cool-peco() {}
